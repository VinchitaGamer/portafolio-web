// Script de prueba para verificar navegaci√≥n del panel administrativo
// Ejecuta este c√≥digo en la consola del navegador cuando est√©s en cualquier p√°gina del panel administrativo

console.log('üîß Verificando navegaci√≥n del panel administrativo...');

// Test 1: Verificar que el objeto admin existe
if (typeof window.admin !== 'undefined') {
    console.log('‚úÖ Objeto admin encontrado');

    // Test 2: Verificar m√©todos de navegaci√≥n
    const navigationMethods = ['navigateToSection', 'goToDashboard', 'openPreview', 'switchSection'];
    let navigationOk = true;

    navigationMethods.forEach(method => {
        if (typeof window.admin[method] === 'function') {
            console.log(`‚úÖ M√©todo de navegaci√≥n ${method} disponible`);
        } else {
            console.log(`‚ùå M√©todo de navegaci√≥n ${method} no encontrado`);
            navigationOk = false;
        }
    });

    if (navigationOk) {
        console.log('‚úÖ Todos los m√©todos de navegaci√≥n est√°n disponibles');
    }

    // Test 3: Verificar enlaces del sidebar
    const navLinks = document.querySelectorAll('.admin-nav .nav-item');
    console.log(`üîç Encontrados ${navLinks.length} enlaces de navegaci√≥n`);

    navLinks.forEach(link => {
        const href = link.getAttribute('href');
        const section = link.dataset.section;

        if (href && href.endsWith('.html')) {
            console.log(`‚úÖ Enlace v√°lido: ${section} -> ${href}`);
        } else {
            console.log(`‚ùå Enlace inv√°lido: ${section} -> ${href}`);
        }
    });

    // Test 4: Verificar botones del header
    const headerButtons = document.querySelectorAll('.header-actions .btn');
    console.log(`üîç Encontrados ${headerButtons.length} botones en el header`);

    headerButtons.forEach(button => {
        const onclick = button.onclick?.toString() || 'Sin onclick';
        if (onclick.includes('admin.')) {
            console.log(`‚úÖ Bot√≥n con m√©todo admin: ${onclick.split('admin.')[1]?.split('(')[0] || 'm√©todo desconocido'}`);
        } else {
            console.log(`‚ö†Ô∏è  Bot√≥n sin m√©todo admin: ${onclick.substring(0, 50)}...`);
        }
    });

    // Test 5: Probar navegaci√≥n program√°tica
    console.log('üîÑ Probando navegaci√≥n program√°tica...');

    // Probar navegaci√≥n a diferentes secciones
    const sectionsToTest = ['dashboard', 'projects', 'messages'];

    sectionsToTest.forEach(section => {
        if (typeof window.admin.navigateToSection === 'function') {
            console.log(`‚úÖ M√©todo navigateToSection disponible para secci√≥n: ${section}`);
        }
    });

    // Test 6: Verificar URLs de archivos
    const currentPage = window.location.pathname.split('/').pop();
    console.log(`üìÑ P√°gina actual: ${currentPage}`);

    const expectedFiles = {
        'dashboard.html': ['dashboard-section', 'projects-count', 'images-count', 'messages-count'],
        'projects.html': ['projects-section', 'project-item', 'add-project-btn'],
        'messages.html': ['messages-section', 'messages-list'],
        'preview.html': ['preview-section', 'preview-frame'],
        'content.html': ['content-section', 'content-editor-container'],
        'navigation.html': ['navigation-section', 'nav-items'],
        'images.html': ['images-section', 'images-grid'],
        'settings.html': ['settings-section', 'settings-form'],
        'backup.html': ['backup-section', 'backup-actions']
    };

    if (expectedFiles[currentPage]) {
        console.log(`üîç Verificando elementos espec√≠ficos de ${currentPage}...`);
        expectedFiles[currentPage].forEach(elementId => {
            if (document.getElementById(elementId) || document.querySelector(`.${elementId}`)) {
                console.log(`‚úÖ Elemento encontrado: ${elementId}`);
            } else {
                console.log(`‚ùå Elemento no encontrado: ${elementId}`);
            }
        });
    }

} else {
    console.log('‚ùå Objeto admin no encontrado. Revisa que el archivo admin.js est√© cargado correctamente.');
}

// Test 7: Verificar elementos comunes del layout
const commonElements = [
    '.admin-sidebar',
    '.admin-main',
    '.admin-header',
    '.admin-nav',
    '.logout-btn'
];

commonElements.forEach(selector => {
    if (document.querySelector(selector)) {
        console.log(`‚úÖ Elemento com√∫n encontrado: ${selector}`);
    } else {
        console.log(`‚ùå Elemento com√∫n no encontrado: ${selector}`);
    }
});

// Test 8: Verificar carga de scripts
const scripts = document.querySelectorAll('script');
let scriptsOk = true;

scripts.forEach(script => {
    const src = script.src;
    if (src.includes('auth.js') || src.includes('admin.js')) {
        console.log(`‚úÖ Script cargado: ${src.split('/').pop()}`);
    }
});

console.log('üîß Verificaci√≥n completada. Revisa la consola para ver todos los resultados.');

// Funci√≥n helper para probar navegaci√≥n manualmente
window.testNavigation = function(section) {
    console.log(`üß≠ Probando navegaci√≥n a: ${section}`);
    if (window.admin && window.admin.navigateToSection) {
        window.admin.navigateToSection(section);
    } else {
        console.log('‚ùå M√©todo navigateToSection no disponible');
    }
};

// Funci√≥n helper para probar dashboard
window.testDashboard = function() {
    console.log('üè† Probando navegaci√≥n al dashboard...');
    if (window.admin && window.admin.goToDashboard) {
        window.admin.goToDashboard();
    } else {
        console.log('‚ùå M√©todo goToDashboard no disponible');
    }
};

console.log('üí° Funciones de prueba disponibles:');
console.log('   - testNavigation("projects") - Probar navegaci√≥n a proyectos');
console.log('   - testNavigation("messages") - Probar navegaci√≥n a mensajes');
console.log('   - testDashboard() - Probar navegaci√≥n al dashboard');
